https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/solution/

look at the solution part for the concept of "state machine"